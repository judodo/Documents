é€™æ˜¯ä¸€å€‹å‡ç´šç‰ˆçš„è…³æœ¬ã€‚å®ƒä¸åªæœƒå»ºç«‹æª”æ¡ˆçµæ§‹ï¼Œé‚„æœƒè‡ªå‹•åŸ·è¡Œä»¥ä¸‹å‹•ä½œï¼š

    å»ºç«‹è™›æ“¬ç’°å¢ƒ (.venv)ã€‚

    å‡ç´š pip ä¸¦å®‰è£åŸºç¤é–‹ç™¼å¥—ä»¶ (pytest, ruff, black)ã€‚

    å˜—è©¦è‡ªå‹•é–‹å•Ÿ VS Code é€²å…¥è©²å°ˆæ¡ˆã€‚

è‡ªå‹•åŒ–å°ˆæ¡ˆç”¢ç”Ÿå™¨ (init_project.py)
Python

import os
import subprocess
import sys
from pathlib import Path

def run_command(command, cwd=None):
    """åŸ·è¡Œçµ‚ç«¯æ©ŸæŒ‡ä»¤ä¸¦é¡¯ç¤ºçµæœ"""
    try:
        subprocess.run(command, shell=True, check=True, cwd=cwd)
    except subprocess.CalledProcessError as e:
        print(f"âŒ åŸ·è¡ŒæŒ‡ä»¤å¤±æ•—: {command}\néŒ¯èª¤: {e}")

def create_project(project_name):
    project_path = Path(project_name).resolve()
    
    # 1. å»ºç«‹ç›®éŒ„çµæ§‹
    folders = ["src", "tests", ".vscode"]
    for folder in folders:
        (project_path / folder).mkdir(parents=True, exist_ok=True)

    # 2. å®šç¾©åˆå§‹æª”æ¡ˆå…§å®¹
    files = {
        "src/__init__.py": "",
        "src/main.py": 'def main():\n    print("Hello from project setup!")\n\nif __name__ == "__main__":\n    main()',
        "tests/__init__.py": "",
        "tests/test_main.py": "def test_success():\n    assert True",
        ".gitignore": "__pycache__/\n.venv/\n.vscode/\n*.pyc\n.pytest_cache/\n",
        "requirements.txt": "pytest\nblack\nruff",
        ".vscode/settings.json": """{
    "python.defaultInterpreterPath": ".venv/Scripts/python.exe",
    "python.analysis.typeCheckingMode": "basic",
    "editor.formatOnSave": true,
    "editor.defaultFormatter": "ms-python.black-py-formatter",
    "editor.codeActionsOnSave": { "source.organizeImports": "explicit" }
}"""
    }

    for rel_path, content in files.items():
        with open(project_path / rel_path, "w", encoding="utf-8") as f:
            f.write(content)

    print(f"ğŸ“‚ å°ˆæ¡ˆçµæ§‹å·²å»ºç«‹æ–¼: {project_path}")

    # 3. å»ºç«‹è™›æ“¬ç’°å¢ƒ
    print("ğŸ› ï¸ æ­£åœ¨å»ºç«‹è™›æ“¬ç’°å¢ƒ (.venv)...")
    run_command(f"{sys.executable} -m venv .venv", cwd=project_path)

    # 4. å®‰è£åŸºç¤å¥—ä»¶
    # æ ¹æ“šä½œæ¥­ç³»çµ±æ±ºå®š pip è·¯å¾‘
    pip_exe = ".venv\\Scripts\\pip" if os.name == "nt" else ".venv/bin/pip"
    
    print("ğŸ“¦ æ­£åœ¨å‡ç´š pip ä¸¦å®‰è£é–‹ç™¼å¥—ä»¶ (pytest, black, ruff)...")
    run_command(f"{pip_exe} install --upgrade pip", cwd=project_path)
    run_command(f"{pip_exe} install -r requirements.txt", cwd=project_path)

    print(f"\nâœ… å°ˆæ¡ˆ '{project_name}' åˆå§‹åŒ–å®Œæˆï¼")
    
    # 5. å˜—è©¦è‡ªå‹•é–‹å•Ÿ VS Code
    try_open = input("æ˜¯å¦ç«‹å³ä½¿ç”¨ VS Code é–‹å•Ÿæ­¤å°ˆæ¡ˆï¼Ÿ (y/n): ").lower()
    if try_open == 'y':
        run_command(f"code .", cwd=project_path)

if __name__ == "__main__":
    name = input("è«‹è¼¸å…¥å°ˆæ¡ˆåç¨±: ").strip()
    if name:
        create_project(name)
    else:
        print("è«‹è¼¸å…¥æœ‰æ•ˆçš„åç¨±ã€‚")
